From 319c08e6aff97811ce3f8f68fd8318950e28e8b3 Mon Sep 17 00:00:00 2001
From: Katsuya Matsubara <matsu@igel.co.jp>
Date: Mon, 6 Feb 2012 15:34:17 +0900
Subject: [PATCH 10/73] mach-rcar: add an uio platform definition for VPC

---
 arch/arm/mach-rcar/board-silverstone.c |   27 +++++++++++++++++++++++++++
 1 files changed, 27 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-rcar/board-silverstone.c b/arch/arm/mach-rcar/board-silverstone.c
index 29371a2..0d6c480 100644
--- a/arch/arm/mach-rcar/board-silverstone.c
+++ b/arch/arm/mach-rcar/board-silverstone.c
@@ -165,6 +165,32 @@ static struct platform_device ipmmu_device = {
 	.num_resources  = ARRAY_SIZE(ipmmu_resources),
 };
 
+/* VPC */
+static struct uio_info vpc_platform_data = {
+	.name = "VPC",
+	.version = "0",
+	.irq = -1,
+};
+
+static struct resource vpc_resources[] = {
+	[0] = {
+		.name   = "VPC",
+		.start  = 0xfd0d0000,
+		.end    = 0xfd0d008f,
+		.flags  = IORESOURCE_MEM,
+	},
+};
+
+static struct platform_device vpc_device = {
+	.name           = "uio_pdrv_genirq",
+	.id             = 4,
+	.dev = {
+		.platform_data  = &vpc_platform_data,
+	},
+	.resource       = vpc_resources,
+	.num_resources  = ARRAY_SIZE(vpc_resources),
+};
+
 static void __init memchunk_cmdline_override( char *name, unsigned long *sizep )
 {
     char *p = boot_command_line;
@@ -713,6 +739,7 @@ static struct platform_device *devs[] __initdata = {
 	&meram_device,
 	&vio_device,
 	&ipmmu_device,
+	&vpc_device,
 };
 
 static void __init gic_init_irq(void)
-- 
1.7.0.4

